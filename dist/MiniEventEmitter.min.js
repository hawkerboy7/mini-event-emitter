var MiniEventEmitter
MiniEventEmitter=function(){function t(t){this.settings={error:(null!=t?t.error:void 0)||!1,trace:(null!=t?t.trace:void 0)||!1,worker:(null!=t?t.worker:void 0)||null},this.events={},this.groups={},this.settings.worker&&(this.worker=webworkify(this.settings.worker),this.worker.addEventListener("message",function(t){return function(n){var r
return r=n.data,e({self:t,args:r.args,event:r.event,internal:!0})}}(this)))}var e,n,r,i,s,o
return t.prototype.on=function(t,e,s){var u
return u=o(e,s),e=u[0],s=u[1],i(t)?i(e)?r(s)?(this.groups[e]?this.groups[e][t]?this.groups[e][t].push(s):this.groups[e][t]=[s]:(this.groups[e]={},this.groups[e][t]=[s]),this.events[t]?this.events[t].push(s):this.events[t]=[s],this):n(this,"on",6,t,e):n(this,"on",5):n(this,"on",1)},t.prototype.off=function(t,e,u){var h,f,g,v,a,p
if(p=function(e){return function(){var n,r,i,s
for(r=0,s=h.length;s>r;r++)n=h[r],i=e.events[t].indexOf(n),e.events[t].splice(i,1)
return 0===e.events[t].length?delete e.events[t]:void 0}}(this),v=o(e,u),e=v[0],u=v[1],t&&!i(t))return n(this,"off",1)
if(!i(e))return n(this,"off",5)
if(u&&!r(u))return n(this,"off",6,t,e)
if(t&&!this.groups[e])return n(this,"off",7,t,e)
if(!t){a=this.groups[e]
for(t in a)h=a[t],p()
return delete this.groups[e],this}return(h=this.groups[e][t])?u?-1===(f=h.indexOf(u))?n(this,"off",2,t,e):(h.splice(f,1),0===h.length&&delete this.groups[e][t],0===s(this.groups[e])&&delete this.groups[e],g=this.events[t].indexOf(u),this.events[t].splice(g,1),0===this.events[t].length&&delete this.events[t],this):(p(),delete this.groups[e][t],0===s(this.groups[e])&&delete this.groups[e],this):n(this,"off",4,t,e)},t.prototype.emit=function(){var t,n
return t=Array.from(arguments),n=t.shift(),e({self:this,args:t,event:n,internal:!1})},t.prototype.trigger=function(){return this.emit.apply(this,arguments),this},i=function(t){return"string"==typeof t||t instanceof String},s=function(t){return Object.keys(t).length},r=function(t){return"function"==typeof t},n=function(t,e,n,r,i){var s
return t.settings.error?(s="MiniEventEmitter ~ "+e+" ~ ",1===n&&(s+="Event name must be a string"),2===n&&(s+='Provided function to remove with event "'+r+'" in group "'+i+'" is not found'),3===n&&(s+="Event was not provided"),4===n&&(s+='Event "'+r+'" does not exist'),5===n&&(s+="Provided group must be a string"),6===n&&(s+='The last param provided with event "'+r+'" and group "'+i+'" is expected to be a function'),7===n&&(s+='Provided Group "'+i+"\" doesn't have any events"),console.warn?console.warn(s):console.log(s),t):t},o=function(t,e){return null==e&&r(t)?(e=t,t=""):t||(t=""),[t,e]},e=function(t){var e,r,s,o,u,h,f,g,v
if(v=t.self,s=t.event,r=t.args,u=t.internal,!s)return n(v,"emit",3)
if(!i(s))return n(v,"emit",1)
if(!(f=v.events[s]))return n(v,"emit",4,s)
if(v.settings.worker&&!u)v.worker.postMessage({args:r,event:s})
else for(v.settings.trace&&(g="MiniEventEmitter ~ trace ~ "+s,console.debug?console.debug(g):console.log(g)),o=0,h=f.length;h>o;o++)e=f[o],e.apply(e,r)
return v},t}(),window.MiniEventEmitter=MiniEventEmitter
